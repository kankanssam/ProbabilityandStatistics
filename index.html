<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>확률과 통계 학습 📝</title>
    <style>
        /* 기본 스타일 - 글자 크기 상향 조정 */
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            height: 100%;
            overflow: hidden;
            background-color: #f8f9fa;
            font-size: 17px; /* 기본 폰트 크기 증가 */
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* 왼쪽 목차 (Sidebar) */
        .sidebar {
            width: 20%;
            background-color: #e3f2fd;
            padding: 25px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
            overflow-y: auto;
        }
        .sidebar h1 {
            font-size: 1.8em;
            color: #1a237e;
            margin-bottom: 25px;
        }
        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }
        .sidebar li {
            padding: 16px 20px;
            margin-bottom: 12px;
            cursor: pointer;
            border-radius: 8px;
            color: #333;
            font-weight: 500;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }
        .sidebar li:hover {
            background-color: #bbdefb;
        }
        .sidebar li.active {
            background-color: #42a5f5;
            color: white;
            font-weight: 600;
        }

        /* 오른쪽 컨텐츠 */
        .main-content-wrapper {
            width: 80%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .main-content {
            flex-grow: 1;
            padding: 40px 50px;
            overflow-y: auto;
        }

        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }

        h2 {
            font-size: 2.2em;
            color: #1a237e;
            border-bottom: 3px solid #42a5f5;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        h3 {
            font-size: 1.6em;
            color: #0d47a1;
            margin-top: 40px;
            margin-bottom: 15px;
        }
        p, li {
            line-height: 1.8; /* 줄 간격 조정 */
            color: #444;
            font-size: 1.1em;
        }
        ul { padding-left: 20px; }
        b, strong {
            color: #d81b60;
        }
        code {
            background-color: #e9ecef;
            padding: 3px 6px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
        }

        /* 버튼 스타일 */
        .btn-container {
            margin-top: 35px;
            text-align: center;
        }
        .btn {
            padding: 14px 32px;
            font-size: 1.1em;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background-color: #42a5f5;
            color: white;
        }
        .btn-primary:hover {
            background-color: #1e88e5;
            transform: translateY(-2px);
        }
        /* 난이도 버튼 크기 대폭 증가 */
        .btn-difficulty {
            background-color: #81c784;
            color: white;
            width: 200px; /* 너비 지정 */
            padding: 20px 0; /* 패딩 조정 */
            font-size: 1.3em; /* 폰트 크기 증가 */
            margin: 10px;
        }
        .btn-difficulty:hover {
            background-color: #66bb6a;
            transform: translateY(-2px);
        }
        .btn-submit {
             background-color: #ff8a65;
             color: white;
        }
        .btn-submit:hover {
             background-color: #ff7043;
             transform: translateY(-2px);
        }

        /* 문제 및 예제 섹션 스타일 */
        .dynamic-view-container {
            border: 1px solid #ddd;
            padding: 30px;
            border-radius: 10px;
            background-color: #ffffff;
        }
        .problem-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* 결과 화면 스타일 */
        .result-container {
            margin-top: 30px;
            padding: 30px;
            border: 2px solid #81c784;
            background-color: #f1f8e9;
            border-radius: 10px;
            text-align: center;
        }
        .result-details p {
            text-align: left;
            border-bottom: 1px solid #ddd;
            padding: 15px 5px;
            margin-bottom: 10px;
        }
        .correct { color: #388e3c; }
        .incorrect { color: #d32f2f; }
        
        /* 푸터 스타일 추가 */
        footer {
            text-align: center;
            padding: 20px;
            background-color: #e9ecef;
            color: #6c757d;
            font-size: 0.9em;
            flex-shrink: 0; /* 푸터 크기가 줄어들지 않도록 설정 */
        }

        /* 반응형 웹 디자인 */
        @media (max-width: 768px) {
            body, html { font-size: 16px; }
            .container { flex-direction: column; height: auto; }
            .sidebar, .main-content-wrapper { width: 100%; box-sizing: border-box; }
            .main-content { padding: 25px; }
            .btn-difficulty { width: 100%; margin: 8px 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="sidebar">
        <h1>학습 목차 📚</h1>
        <ul>
            <li onclick="showContent('perm-comb')" class="active">순열과 조합</li>
            <li onclick="showContent('binomial')">이항정리</li>
        </ul>
    </div>
    <div class="main-content-wrapper">
        <div class="main-content">
            <div id="perm-comb" class="content-section active">
                <div id="perm-comb-concept">
                    <h2>순열과 조합</h2>
                    <h3>1. 경우의 수 기본 법칙</h3>
                    <p><b>합의 법칙:</b> 두 사건 A, B가 동시에 일어나지 않을 때, 사건 A 또는 사건 B가 일어나는 경우의 수는 각 사건의 경우의 수를 더한 것과 같습니다. (<code>m + n</code>)</p>
                    <p><b>곱의 법칙:</b> 두 사건 A, B에 대하여 사건 A가 일어나는 경우의 수가 m이고, 그 각각에 대하여 사건 B가 일어나는 경우의 수가 n일 때, 두 사건이 연이어 일어나는 경우의 수는 두 경우의 수를 곱한 것과 같습니다. (<code>m × n</code>)</p>
                    
                    <h3>2. 순열 (Permutation)</h3>
                    <p>서로 다른 n개의 원소에서 r개를 <strong>순서를 고려하여</strong> 선택하고 나열하는 것을 의미합니다. '반장, 부반장 뽑기'와 같이 순서가 결과에 영향을 미치는 경우에 사용됩니다.</p>
                    <ul>
                        <li><b>기호:</b> <code>ₙPᵣ</code></li>
                        <li><b>계산 공식:</b> <code>n! / (n-r)!</code></li>
                        <li><b>원순열:</b> 서로 다른 n개의 원소를 원형으로 배열하는 순열입니다. 일반 순열과 달리 회전하여 일치하는 경우는 같은 것으로 봅니다. (<code>(n-1)!</code>)</li>
                        <li><b>중복순열:</b> 서로 다른 n개에서 <strong>중복을 허용하여</strong> r개를 택하는 순열입니다. '네 자리 비밀번호 설정'과 같이 중복이 가능한 경우에 사용됩니다. (<code>nʳ</code>)</li>
                        <li><b>같은 것이 있는 순열:</b> n개 중에 같은 것이 각각 p개, q개, ... 있을 때, 이들을 모두 나열하는 순열입니다. (<code>n! / (p! * q! * ...)</code>)</li>
                    </ul>

                    <h3>3. 조합 (Combination)</h3>
                    <p>서로 다른 n개의 원소에서 <strong>순서를 고려하지 않고</strong> r개를 선택하는 것을 의미합니다. '대표 2명 뽑기'와 같이 순서가 결과에 영향을 주지 않는 경우에 사용됩니다.</p>
                    <ul>
                        <li><b>기호:</b> <code>ₙCᵣ</code></li>
                        <li><b>계산 공식:</b> <code>n! / (r! * (n-r)!) = ₙPᵣ / r!</code></li>
                        <li><b>중복조합:</b> 서로 다른 n개에서 <strong>중복을 허용하여</strong> r개를 택하는 조합입니다. '과일 가게에서 5개의 과일 사기'와 같이 순서 없이 중복이 가능한 경우에 사용됩니다. (<code>ₙ₊ᵣ₋₁Cᵣ</code>)</li>
                    </ul>
                    <div class="btn-container">
                        <button class="btn btn-primary" onclick="showView('perm-comb-example-difficulty')">예제풀이 보기</button>
                        <button class="btn btn-primary" onclick="showView('perm-comb-quiz-difficulty')">문제풀이 시작</button>
                    </div>
                </div>
                <div id="perm-comb-example-difficulty" style="display:none;">
                    <h2>순열과 조합 - 예제 난이도 선택</h2>
                    <div class="btn-container">
                        <button class="btn btn-difficulty" onclick="startExamples('perm-comb', 'basic')">기초 예제</button>
                        <button class="btn btn-difficulty" onclick="startExamples('perm-comb', 'intermediate')">응용 예제</button>
                    </div>
                    <div class="btn-container"><button class="btn" onclick="showView('perm-comb-concept')">개념으로 돌아가기</button></div>
                </div>
                <div id="perm-comb-example-view" class="dynamic-view-container" style="display:none;"></div>
                <div id="perm-comb-quiz-difficulty" style="display:none;">
                    <h2>순열과 조합 - 문제 난이도 선택</h2>
                    <div class="btn-container">
                        <button class="btn btn-difficulty" onclick="startQuiz('perm-comb', 'basic')">기초</button>
                        <button class="btn btn-difficulty" onclick="startQuiz('perm-comb', 'intermediate')">응용</button>
                        <button class="btn btn-difficulty" onclick="startQuiz('perm-comb', 'advanced')">심화</button>
                    </div>
                     <div class="btn-container"><button class="btn" onclick="showView('perm-comb-concept')">개념으로 돌아가기</button></div>
                </div>
                <div id="perm-comb-quiz-view" class="dynamic-view-container" style="display:none;"></div>
            </div>

            <div id="binomial" class="content-section">
                 <div id="binomial-concept">
                    <h2>이항정리</h2>
                    <h3>1. 이항정리란?</h3>
                    <p>이항(항이 두 개)의 거듭제곱 <code>(a+b)ⁿ</code>을 전개했을 때 나타나는 식의 규칙성입니다. 이항정리를 이용하면 복잡한 다항식의 특정 항의 계수를 쉽게 구할 수 있습니다.</p>
                    <p><b>기본 공식:</b> (a+b)ⁿ = ₙC₀aⁿ + ₙC₁aⁿ⁻¹b¹ + ... + ₙCᵣaⁿ⁻ʳbʳ + ... + ₙCₙbⁿ</p>
                    <p>여기서 각 항의 계수 <code>ₙCᵣ</code>을 <b>이항계수</b>라고 하며, <code>ₙCᵣaⁿ⁻ʳbʳ</code>을 전개식의 <b>일반항</b>이라고 합니다. 일반항은 특정 항을 찾는 데 매우 유용합니다.</p>
                    
                    <h3>2. 파스칼의 삼각형</h3>
                    <p>이항계수(<code>ₙCᵣ</code>)를 삼각형 모양으로 배열한 것입니다. 각 행은 <code>(a+b)ⁿ</code>의 계수들과 일치하며, 다음과 같은 중요한 성질을 가집니다.</p>
                    <ul>
                        <li>각 행의 양 끝 숫자는 항상 1입니다. (<code>ₙC₀ = ₙCₙ = 1</code>)</li>
                        <li>각 행의 숫자는 바로 위 행의 이웃한 두 숫자의 합과 같습니다. (<code>ₙ₋₁Cᵣ₋₁ + ₙ₋₁Cᵣ = ₙCᵣ</code>)</li>
                        <li>n행의 모든 이항계수의 합은 <code>2ⁿ</code> 입니다. (<code>ₙC₀ + ₙC₁ + ... + ₙCₙ = 2ⁿ</code>)</li>
                        <li><b>하키 스틱 패턴:</b> 삼각형의 대각선 위 숫자들의 합은 그 다음 행의 안쪽 숫자와 같습니다.</li>
                    </ul>
                    <div class="btn-container">
                        <button class="btn btn-primary" onclick="showView('binomial-example-difficulty')">예제풀이 보기</button>
                        <button class="btn btn-primary" onclick="showView('binomial-quiz-difficulty')">문제풀이 시작</button>
                    </div>
                </div>
                 <div id="binomial-example-difficulty" style="display:none;">
                    <h2>이항정리 - 예제 난이도 선택</h2>
                    <div class="btn-container">
                        <button class="btn btn-difficulty" onclick="startExamples('binomial', 'basic')">기초 예제</button>
                        <button class="btn btn-difficulty" onclick="startExamples('binomial', 'intermediate')">응용 예제</button>
                    </div>
                    <div class="btn-container"><button class="btn" onclick="showView('binomial-concept')">개념으로 돌아가기</button></div>
                </div>
                <div id="binomial-example-view" class="dynamic-view-container" style="display:none;"></div>
                <div id="binomial-quiz-difficulty" style="display:none;">
                    <h2>이항정리 - 문제 난이도 선택</h2>
                    <div class="btn-container">
                        <button class="btn btn-difficulty" onclick="startQuiz('binomial', 'basic')">기초</button>
                        <button class="btn btn-difficulty" onclick="startQuiz('binomial', 'intermediate')">응용</button>
                        <button class="btn btn-difficulty" onclick="startQuiz('binomial', 'advanced')">심화</button>
                    </div>
                    <div class="btn-container"><button class="btn" onclick="showView('binomial-concept')">개념으로 돌아가기</button></div>
                </div>
                <div id="binomial-quiz-view" class="dynamic-view-container" style="display:none;"></div>
            </div>
        </div>
        <footer>
            <p>만든이 by 김깐깐</p>
        </footer>
    </div>
</div>

<script>
    // --- 데이터베이스 ---
    const exampleData = {
        'perm-comb': {
            'basic': [
                { q: "5명의 학생 중 3명을 뽑아 일렬로 세우는 경우의 수는?", sol: "<b>개념:</b> 순열 (Permutation)<br>서로 다른 5명 중 3명을 순서에 맞게 나열하는 것이므로 순열을 사용합니다.<br><b>풀이:</b> ₅P₃ = 5 × 4 × 3 = 60가지입니다." },
                { q: "빨강, 노랑, 파랑, 초록 4가지 색깔 중 2가지를 순서에 상관없이 고르는 경우의 수는?", sol: "<b>개념:</b> 조합 (Combination)<br>순서에 상관없이 2가지를 선택하는 것이므로 조합을 사용합니다.<br><b>풀이:</b> ₄C₂ = (4 × 3) / (2 × 1) = 6가지입니다." }
            ],
            'intermediate': [
                { q: "부모님을 포함한 5명의 가족이 원탁에 앉을 때, 부모님이 서로 이웃하게 앉는 경우의 수는?", sol: "<b>개념:</b> 원순열 + 이웃하는 경우의 수<br>1. 부모님을 하나의 묶음으로 생각하면 총 4개의 단위를 원형으로 배열하는 것과 같습니다.<br>2. 원순열 공식 (n-1)!을 적용하면 (4-1)! = 3! = 6가지입니다.<br>3. 묶음 안에서 부모님이 서로 자리를 바꾸는 경우의 수는 2! = 2가지입니다.<br><b>풀이:</b> 곱의 법칙에 따라 6 × 2 = 12가지입니다." },
                { q: "방정식 x + y + z = 7을 만족시키는 음이 아닌 정수해(x≥0, y≥0, z≥0)의 개수는?", sol: "<b>개념:</b> 중복조합 (Combination with Repetition)<br>서로 다른 3개의 문자(x, y, z)에서 중복을 허용하여 7개를 뽑는 것과 같습니다.<br><b>풀이:</b> ₃H₇ = ₃₊₇₋₁C₇ = ₉C₇ = ₉C₂ = (9 × 8) / 2 = 36가지입니다." }
            ]
        },
        'binomial': {
            'basic': [
                { q: "(x + 2)⁴의 전개식에서 x³의 계수를 구하시오.", sol: "<b>개념:</b> 이항정리 일반항<br>일반항은 ₄Cᵣ * x⁴⁻ʳ * 2ʳ 입니다.<br>x³항이 되려면 x의 지수인 4-r이 3이어야 하므로, r=1 입니다.<br><b>풀이:</b> r=1을 일반항에 대입하면 ₄C₁ * x³ * 2¹ = 4 * x³ * 2 = 8x³. 따라서 계수는 <b>8</b>입니다." },
                { q: "파스칼의 삼각형의 성질을 이용하여 ₅C₂ + ₅C₃ 의 값을 구하시오.", sol: "<b>개념:</b> 파스칼의 삼각형 성질 (n-1Cr-1 + n-1Cr = nCr)<br>이 성질에 따라 n-1=5, r-1=2, r=3으로 보면 n=6, r=3이 됩니다.<br><b>풀이:</b> ₅C₂ + ₅C₃ = ₆C₃ = (6 × 5 × 4) / (3 × 2 × 1) = 20입니다." }
            ],
            'intermediate': [
                { q: "(2x - 1/x)⁶ 의 전개식에서 상수항을 구하시오.", sol: "<b>개념:</b> 이항정리 일반항 활용<br>일반항은 ₆Cᵣ * (2x)⁶⁻ʳ * (-1/x)ʳ = ₆Cᵣ * 2⁶⁻ʳ * (-1)ʳ * x⁶⁻²ʳ 입니다.<br>상수항은 x의 지수가 0이 되는 항이므로, 6-2r=0 이어야 합니다. 따라서 r=3 입니다.<br><b>풀이:</b> r=3을 계수 부분에 대입하면 ₆C₃ * 2³ * (-1)³ = 20 * 8 * (-1) = -160입니다." },
                { q: "₁₀C₀ + ₁₀C₁ + ₁₀C₂ + ... + ₁₀C₁₀ 의 값을 구하시오.", sol: "<b>개념:</b> 이항계수의 성질<br>이항계수의 합 공식 ₙC₀ + ₙC₁ + ... + ₙCₙ = 2ⁿ을 이용합니다.<br><b>풀이:</b> n=10이므로, 합은 2¹⁰ = 1024입니다." }
            ]
        }
    };
    const quizData = {
        'perm-comb': {
            'basic': [
                { q: "서로 다른 4권의 책 중 2권을 골라 순서대로 꽂는 경우의 수는?", a: "12", sol: "₄P₂ = 4 × 3 = 12" },
                { q: "5명의 학생 중 대표 2명을 뽑는 경우의 수는?", a: "10", sol: "₅C₂ = (5 × 4) / (2 × 1) = 10" },
                { q: "두 주사위를 던질 때, 눈의 합이 4가 되는 경우의 수는?", a: "3", sol: "(1,3), (2,2), (3,1)의 3가지" },
                { q: "숫자 1, 2, 3을 사용하여 만들 수 있는 세 자리 자연수의 개수는?", a: "6", sol: "₃P₃ = 3! = 6" },
                { q: "A, B, C, D 네 사람이 일렬로 설 때, A가 맨 앞에 서는 경우의 수는?", a: "6", sol: "A를 고정하고 나머지 3명을 나열하므로 3! = 6" }
            ],
            'intermediate': [
                { q: "0, 1, 2, 3, 4의 숫자로 만들 수 있는 세 자리 짝수는? (중복 허용, 0으로 시작 불가)", a: "50", sol: "일의 자리가 0: 백의 자리에 올 수 있는 수는 1,2,3,4(4가지), 십의 자리는 5가지. 4*5=20가지. 일의 자리가 2 또는 4: 백의 자리는 0제외(4가지->3가지), 십의 자리는 5가지. 3*5*2=30가지. 20+30=50" },
                { q: "남학생 3명과 여학생 3명을 일렬로 세울 때, 남녀가 교대로 서는 경우의 수는?", a: "72", sol: "(남녀남녀남녀: 3!×3!=36) + (여남여남여남: 3!×3!=36) = 72" },
                { q: "computer'의 8개 문자를 일렬로 나열할 때, c와 r 사이에 2개의 문자가 들어가는 경우의 수는?", a: "7200", sol: "c,r 제외 6개 문자 중 2개 선택(₆P₂=30). (c O O r) 묶음을 하나로 보고 5! 배열. c와 r 자리바꿈(2!). 30 × 5! × 2 = 7200" },
                { q: "빨간 공 3개, 파란 공 2개를 일렬로 나열하는 경우의 수는?", a: "10", sol: "같은 것이 있는 순열: 5! / (3! × 2!) = 10" },
                { q: "사과, 배, 감 세 종류의 과일 중에서 중복을 허용하여 5개를 사는 경우의 수는?", a: "21", sol: "서로 다른 3개에서 중복을 허용하여 5개를 뽑는 중복조합: ₃H₅ = ₇C₅ = ₇C₂ = 21" }
            ],
            'advanced': [
                 { q: "A,B,C,D,E 5명을 3개의 다른 방에 배정할 때, 빈 방이 없도록 배정하는 경우의 수는?", a: "150", sol: "분할과 분배: S(5,3) * 3! = 25 * 6 = 150. 또는 전체(3⁵) - 1개방만사용(3) - 2개방만사용(3C2*(2^5-2)) = 243-3-90=150" },
                 { q: "방정식 x + y + z = 9를 만족시키는 양의 정수해의 개수는?", a: "28", sol: "x', y', z'을 x-1, y-1, z-1로 치환. x'+y'+z'=6. ₃H₆ = ₈C₆ = 28" },
                 { q: "가로 4, 세로 3 도로망에서 A에서 B까지 최단거리로 가는 경우의 수는?", a: "35", sol: "총 7번 이동 중 가로 4번 선택: ₇C₄ = 35" },
                 { q: "1,1,1,2,2,3,3의 7개 숫자를 나열하여 만들 수 있는 7자리 자연수의 개수는?", a: "210", sol: "같은 것이 있는 순열: 7! / (3! × 2! × 2!) = 210" },
                 { q: "원탁에 남자 4명과 여자 4명이 교대로 앉는 경우의 수는?", a: "144", sol: "남자 먼저 원형 배열( (4-1)! = 6 ). 여자 4명을 사이 4자리에 배열( 4! = 24 ). 6 × 24 = 144" }
            ]
        },
        'binomial': {
             'basic': [
                { q: "(a+b)³의 전개식에서 a²b의 계수는?", a: "3", sol: "일반항 ₃Cᵣa³⁻ʳbʳ에서 r=1일 때, ₃C₁=3" },
                { q: "(x+2)⁴의 전개식에서 x³의 계수는?", a: "8", sol: "₄C₁x³(2)¹ 이므로 계수는 4×2=8" },
                { q: "이항계수의 합 ₅C₀ + ₅C₁ + ... + ₅C₅의 값은?", a: "32", sol: "이항계수의 성질에 의해 2⁵ = 32" },
                { q: "(2x+1)³의 전개식에서 x의 계수는?", a: "6", sol: "₃C₂(2x)¹(1)² 이므로 계수는 3×2=6" },
                { q: "파스칼의 삼각형에서 ₄C₂ + ₄C₃의 값과 같은 것은? (기호로 답하시오)", a: "5C3", sol: "파스칼의 삼각형의 성질 n-1Cr-1 + n-1Cr = nCr" }
            ],
            'intermediate': [
                 { q: "(x + 1/x)⁶의 전개식에서 상수항은?", a: "20", sol: "일반항 ₆Cᵣx⁶⁻ʳ(x⁻¹)ʳ = ₆Cᵣx⁶⁻²ʳ. 6-2r=0 이므로 r=3. ₆C₃=20" },
                 { q: "(2x-y)⁵의 전개식에서 x³y²의 계수는?", a: "80", sol: "₅C₂(2x)³(-y)² = 10 × 8x³ × y² 이므로 계수는 80" },
                 { q: "₁₀C₁ + ₁₀C₂ + ... + ₁₀C₁₀ 의 값은?", a: "1023", sol: "2¹⁰ - ₁₀C₀ = 1024 - 1 = 1023" },
                 { q: "(1+x)ⁿ의 전개식을 이용하여 11³의 값을 구하시오.", a: "1331", sol: "(1+10)³ = ₃C₀10⁰ + ₃C₁10¹ + ₃C₂10² + ₃C₃10³ = 1+30+300+1000 = 1331" },
                 { q: "(x²-2/x)⁷의 전개식에서 x⁵의 계수는?", a: "-280", sol: "₇Cᵣ(x²)⁷⁻ʳ(-2x⁻¹)ʳ. x의 지수 14-3r=5 -> 3r=9 -> r=3. ₇C₃ * (-2)³ = 35 * (-8) = -280" }
            ],
            'advanced': [
                 { q: "(1+x) + (1+x)² + ... + (1+x)¹⁰의 전개식에서 x²의 계수는?", a: "165", sol: "등비수열의 합 공식 이용. 각 항에서 x²의 계수는 ₂C₂, ₃C₂, ..., ₁₀C₂. 하키스틱 패턴에 의해 합은 ₁₁C₃ = 165" },
                 { q: "(x+a)¹⁰의 전개식에서 x⁸의 계수가 180일 때, 양수 a의 값은?", a: "2", sol: "₁₀C₂x⁸a² = 45a²x⁸. 45a²=180 이므로 a²=4, a=2" },
                 { q: "₁₀C₀ - ₁₀C₁ + ₁₀C₂ - ... + ₁₀C₁₀ 의 값은?", a: "0", sol: "(1-1)¹⁰의 전개식과 같으므로 0¹⁰ = 0" },
                 { q: "99⁵을 100으로 나눈 나머지는?", a: "99", sol: "(100-1)⁵ = ... + ₅C₄(100)¹(-1)⁴ + ₅C₅(100)⁰(-1)⁵. 100의 배수들을 제외하면 마지막 항 -1만 남음. 나머지는 -1 ≡ 99 (mod 100)" },
                 { q: "하키스틱 패턴을 이용하여 ₂C₂ + ₃C₂ + ₄C₂ + ₅C₂의 값을 구하시오.", a: "35", sol: "하키스틱 패턴에 의해 합은 ₆C₃ = 20 + ₅C₃ = 10 + ... = ₆C₃(오류). ₂C₂+₃C₂+₄C₂+₅C₂=₆C₃=20. (수정) ₃C₃+₃C₂+₄C₂+₅C₂=₄C₃+₄C₂+₅C₂=₅C₃+₅C₂=₆C₃=20" }
            ]
        }
    };
    
    // --- 전역 변수 ---
    let currentTopic = 'perm-comb';
    let userAnswers = [];
    let currentQuestionIndex = 0;

    // --- 공통 함수 ---
    function showContent(topic) {
        currentTopic = topic;
        document.querySelectorAll('.content-section').forEach(section => section.style.display = 'none');
        document.getElementById(topic).style.display = 'block';
        document.querySelectorAll('.sidebar li').forEach(li => li.classList.remove('active'));
        document.querySelector(`.sidebar li[onclick="showContent('${topic}')"]`).classList.add('active');
        showView(topic + '-concept');
    }

    function showView(viewId) {
        document.querySelectorAll(`#${currentTopic} > div`).forEach(div => div.style.display = 'none');
        document.getElementById(viewId).style.display = 'block';
    }

    // --- 예제 관련 함수 ---
    function startExamples(topic, difficulty) {
        displayExample(topic, difficulty, 0);
        showView(`${topic}-example-view`);
    }

    function displayExample(topic, difficulty, index) {
        const view = document.getElementById(`${topic}-example-view`);
        const examples = exampleData[topic][difficulty];
        const ex = examples[index];

        let html = `
            <h3>${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)} 예제 (${index + 1}/${examples.length})</h3>
            <div class="problem">
                <p style="font-size: 1.2em;"><b>문제:</b> ${ex.q}</p>
                <hr>
                <p>${ex.sol}</p>
            </div>
            <div class="problem-navigation">
        `;
        
        html += (index > 0) ? `<button class="btn btn-primary" onclick="displayExample('${topic}', '${difficulty}', ${index - 1})">이전 예제</button>` : `<div></div>`;
        html += (index < examples.length - 1) ? `<button class="btn btn-primary" onclick="displayExample('${topic}', '${difficulty}', ${index + 1})">다음 예제</button>` : `<div></div>`;
        
        html += `</div>
            <div class="btn-container">
                 <button class="btn" onclick="showView('${topic}-example-difficulty')">난이도 선택으로</button>
            </div>`;
        
        view.innerHTML = html;
    }

    // --- 퀴즈 관련 함수 ---
    function startQuiz(topic, difficulty) {
        userAnswers = [];
        currentQuestionIndex = 0;
        displayQuestion(topic, difficulty, 0);
        showView(`${topic}-quiz-view`);
    }

    function displayQuestion(topic, difficulty, index) {
        const quizView = document.getElementById(`${topic}-quiz-view`);
        const problems = quizData[topic][difficulty];
        const p = problems[index];

        let quizHtml = `
            <h3>${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)} 문제 (${index + 1}/${problems.length})</h3>
            <div class="problem">
                <p style="font-size: 1.2em;"><b>문제 ${index + 1}:</b> ${p.q}</p>
                <input type="text" id="quiz-answer" placeholder="정답을 입력하세요" style="width: 80%; padding: 10px; font-size: 1em;">
            </div>
            <div class="problem-navigation">
        `;
        
        quizHtml += (index > 0) ? `<button class="btn btn-primary" onclick="navigateQuestion('${topic}', '${difficulty}', ${index - 1})">이전</button>` : `<div></div>`;
        quizHtml += (index < problems.length - 1) ? `<button class="btn btn-primary" onclick="navigateQuestion('${topic}', '${difficulty}', ${index + 1})">다음</button>` : `<button class="btn btn-submit" onclick="submitQuiz('${topic}', '${difficulty}')">결과 보기</button>`;
        
        quizHtml += `</div>
            <div class="btn-container">
                 <button class="btn" onclick="showView('${topic}-quiz-difficulty')">난이도 선택으로</button>
            </div>`;
        
        quizView.innerHTML = quizHtml;

        if (userAnswers[index]) {
            document.getElementById('quiz-answer').value = userAnswers[index];
        }
        document.getElementById('quiz-answer').focus();
    }

    function navigateQuestion(topic, difficulty, nextIndex) {
        const currentAnswer = document.getElementById('quiz-answer').value.trim();
        userAnswers[currentQuestionIndex] = currentAnswer;
        currentQuestionIndex = nextIndex;
        displayQuestion(topic, difficulty, nextIndex);
    }

    function submitQuiz(topic, difficulty) {
        const lastAnswer = document.getElementById('quiz-answer').value.trim();
        userAnswers[currentQuestionIndex] = lastAnswer;

        const problems = quizData[topic][difficulty];
        let score = 0;
        let resultHtml = '<h3>상세 풀이</h3><div class="result-details">';

        problems.forEach((p, index) => {
            const userAnswer = userAnswers[index] || "";
            if (userAnswer.toLowerCase() === p.a.toLowerCase()) {
                score++;
                resultHtml += `<p><b class="correct">[문제 ${index + 1} - 정답]</b><br>정답: ${p.a} (제출: ${userAnswer})<br><i>풀이: ${p.sol}</i></p>`;
            } else {
                resultHtml += `<p><b class="incorrect">[문제 ${index + 1} - 오답]</b><br>정답: ${p.a} (제출: ${userAnswer || '미입력'})<br><i>풀이: ${p.sol}</i></p>`;
            }
        });
        resultHtml += '</div>';

        const totalQuestions = problems.length;
        const finalScore = (score / totalQuestions) * 100;
        
        const quizView = document.getElementById(`${topic}-quiz-view`);
        quizView.innerHTML = `
            <div class="result-container">
                <h2>채점 결과 📊</h2>
                <h3>총 ${totalQuestions}문제 중 ${score}개를 맞혔습니다! (점수: ${finalScore.toFixed(0)}점)</h3>
            </div>
            ${resultHtml}
            <div class="btn-container">
                <button class="btn btn-primary" onclick="startQuiz('${topic}', '${difficulty}')">다시 풀기</button>
                <button class="btn" onclick="showView('${topic}-quiz-difficulty')">다른 난이도 선택</button>
            </div>
        `;
    }

    // --- 초기화 ---
    document.addEventListener('DOMContentLoaded', () => {
        showContent('perm-comb');
    });
</script>

</body>
</html>
