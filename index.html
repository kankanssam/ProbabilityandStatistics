<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™•ë¥ ê³¼ í†µê³„ í•™ìŠµ ğŸ“</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ - ê¸€ì í¬ê¸° ìƒí–¥ ì¡°ì • */
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            height: 100%;
            overflow: hidden;
            background-color: #f8f9fa;
            font-size: 17px; /* ê¸°ë³¸ í°íŠ¸ í¬ê¸° ì¦ê°€ */
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* ì™¼ìª½ ëª©ì°¨ (Sidebar) */
        .sidebar {
            width: 20%;
            background-color: #e3f2fd;
            padding: 25px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
            overflow-y: auto;
        }
        .sidebar h1 {
            font-size: 1.8em;
            color: #1a237e;
            margin-bottom: 25px;
        }
        .sidebar ul {
            list-style-type: none;
            padding: 0;
        }
        .sidebar li {
            padding: 16px 20px;
            margin-bottom: 12px;
            cursor: pointer;
            border-radius: 8px;
            color: #333;
            font-weight: 500;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }
        .sidebar li:hover {
            background-color: #bbdefb;
        }
        .sidebar li.active {
            background-color: #42a5f5;
            color: white;
            font-weight: 600;
        }

        /* ì˜¤ë¥¸ìª½ ì»¨í…ì¸  */
        .main-content-wrapper {
            width: 80%;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .main-content {
            flex-grow: 1;
            padding: 40px 50px;
            overflow-y: auto;
        }

        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }

        h2 {
            font-size: 2.2em;
            color: #1a237e;
            border-bottom: 3px solid #42a5f5;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }
        h3 {
            font-size: 1.6em;
            color: #0d47a1;
            margin-top: 40px;
            margin-bottom: 15px;
        }
        p, li {
            line-height: 1.8; /* ì¤„ ê°„ê²© ì¡°ì • */
            color: #444;
            font-size: 1.1em;
        }
        ul { padding-left: 20px; }
        b, strong {
            color: #d81b60;
        }
        code {
            background-color: #e9ecef;
            padding: 3px 6px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-container {
            margin-top: 35px;
            text-align: center;
        }
        .btn {
            padding: 14px 32px;
            font-size: 1.1em;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            margin: 0 10px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background-color: #42a5f5;
            color: white;
        }
        .btn-primary:hover {
            background-color: #1e88e5;
            transform: translateY(-2px);
        }
        /* ë‚œì´ë„ ë²„íŠ¼ í¬ê¸° ëŒ€í­ ì¦ê°€ */
        .btn-difficulty {
            background-color: #81c784;
            color: white;
            width: 200px; /* ë„ˆë¹„ ì§€ì • */
            padding: 20px 0; /* íŒ¨ë”© ì¡°ì • */
            font-size: 1.3em; /* í°íŠ¸ í¬ê¸° ì¦ê°€ */
            margin: 10px;
        }
        .btn-difficulty:hover {
            background-color: #66bb6a;
            transform: translateY(-2px);
        }
        .btn-submit {
             background-color: #ff8a65;
             color: white;
        }
        .btn-submit:hover {
             background-color: #ff7043;
             transform: translateY(-2px);
        }

        /* ë¬¸ì œ ë° ì˜ˆì œ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .dynamic-view-container {
            border: 1px solid #ddd;
            padding: 30px;
            border-radius: 10px;
            background-color: #ffffff;
        }
        .problem-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* ê²°ê³¼ í™”ë©´ ìŠ¤íƒ€ì¼ */
        .result-container {
            margin-top: 30px;
            padding: 30px;
            border: 2px solid #81c784;
            background-color: #f1f8e9;
            border-radius: 10px;
            text-align: center;
        }
        .result-details p {
            text-align: left;
            border-bottom: 1px solid #ddd;
            padding: 15px 5px;
            margin-bottom: 10px;
        }
        .correct { color: #388e3c; }
        .incorrect { color: #d32f2f; }
        
        /* í‘¸í„° ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        footer {
            text-align: center;
            padding: 20px;
            background-color: #e9ecef;
            color: #6c757d;
            font-size: 0.9em;
            flex-shrink: 0; /* í‘¸í„° í¬ê¸°ê°€ ì¤„ì–´ë“¤ì§€ ì•Šë„ë¡ ì„¤ì • */
        }

        /* ë°˜ì‘í˜• ì›¹ ë””ìì¸ */
        @media (max-width: 768px) {
            body, html { font-size: 16px; }
            .container { flex-direction: column; height: auto; }
            .sidebar, .main-content-wrapper { width: 100%; box-sizing: border-box; }
            .main-content { padding: 25px; }
            .btn-difficulty { width: 100%; margin: 8px 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="sidebar">
        <h1>í•™ìŠµ ëª©ì°¨ ğŸ“š</h1>
        <ul>
            <li onclick="showContent('perm-comb')" class="active">ìˆœì—´ê³¼ ì¡°í•©</li>
            <li onclick="showContent('binomial')">ì´í•­ì •ë¦¬</li>
        </ul>
    </div>
    <div class="main-content-wrapper">
        <div class="main-content">
            <div id="perm-comb" class="content-section active">
                <div id="perm-comb-concept">
                    <h2>ìˆœì—´ê³¼ ì¡°í•©</h2>
                    <h3>1. ê²½ìš°ì˜ ìˆ˜ ê¸°ë³¸ ë²•ì¹™</h3>
                    <p><b>í•©ì˜ ë²•ì¹™:</b> ë‘ ì‚¬ê±´ A, Bê°€ ë™ì‹œì— ì¼ì–´ë‚˜ì§€ ì•Šì„ ë•Œ, ì‚¬ê±´ A ë˜ëŠ” ì‚¬ê±´ Bê°€ ì¼ì–´ë‚˜ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ” ê° ì‚¬ê±´ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ë”í•œ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. (<code>m + n</code>)</p>
                    <p><b>ê³±ì˜ ë²•ì¹™:</b> ë‘ ì‚¬ê±´ A, Bì— ëŒ€í•˜ì—¬ ì‚¬ê±´ Aê°€ ì¼ì–´ë‚˜ëŠ” ê²½ìš°ì˜ ìˆ˜ê°€ mì´ê³ , ê·¸ ê°ê°ì— ëŒ€í•˜ì—¬ ì‚¬ê±´ Bê°€ ì¼ì–´ë‚˜ëŠ” ê²½ìš°ì˜ ìˆ˜ê°€ nì¼ ë•Œ, ë‘ ì‚¬ê±´ì´ ì—°ì´ì–´ ì¼ì–´ë‚˜ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ” ë‘ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê³±í•œ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. (<code>m Ã— n</code>)</p>
                    
                    <h3>2. ìˆœì—´ (Permutation)</h3>
                    <p>ì„œë¡œ ë‹¤ë¥¸ nê°œì˜ ì›ì†Œì—ì„œ rê°œë¥¼ <strong>ìˆœì„œë¥¼ ê³ ë ¤í•˜ì—¬</strong> ì„ íƒí•˜ê³  ë‚˜ì—´í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 'ë°˜ì¥, ë¶€ë°˜ì¥ ë½‘ê¸°'ì™€ ê°™ì´ ìˆœì„œê°€ ê²°ê³¼ì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
                    <ul>
                        <li><b>ê¸°í˜¸:</b> <code>â‚™Páµ£</code></li>
                        <li><b>ê³„ì‚° ê³µì‹:</b> <code>n! / (n-r)!</code></li>
                        <li><b>ì›ìˆœì—´:</b> ì„œë¡œ ë‹¤ë¥¸ nê°œì˜ ì›ì†Œë¥¼ ì›í˜•ìœ¼ë¡œ ë°°ì—´í•˜ëŠ” ìˆœì—´ì…ë‹ˆë‹¤. ì¼ë°˜ ìˆœì—´ê³¼ ë‹¬ë¦¬ íšŒì „í•˜ì—¬ ì¼ì¹˜í•˜ëŠ” ê²½ìš°ëŠ” ê°™ì€ ê²ƒìœ¼ë¡œ ë´…ë‹ˆë‹¤. (<code>(n-1)!</code>)</li>
                        <li><b>ì¤‘ë³µìˆœì—´:</b> ì„œë¡œ ë‹¤ë¥¸ nê°œì—ì„œ <strong>ì¤‘ë³µì„ í—ˆìš©í•˜ì—¬</strong> rê°œë¥¼ íƒí•˜ëŠ” ìˆœì—´ì…ë‹ˆë‹¤. 'ë„¤ ìë¦¬ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •'ê³¼ ê°™ì´ ì¤‘ë³µì´ ê°€ëŠ¥í•œ ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤. (<code>nÊ³</code>)</li>
                        <li><b>ê°™ì€ ê²ƒì´ ìˆëŠ” ìˆœì—´:</b> nê°œ ì¤‘ì— ê°™ì€ ê²ƒì´ ê°ê° pê°œ, qê°œ, ... ìˆì„ ë•Œ, ì´ë“¤ì„ ëª¨ë‘ ë‚˜ì—´í•˜ëŠ” ìˆœì—´ì…ë‹ˆë‹¤. (<code>n! / (p! * q! * ...)</code>)</li>
                    </ul>

                    <h3>3. ì¡°í•© (Combination)</h3>
                    <p>ì„œë¡œ ë‹¤ë¥¸ nê°œì˜ ì›ì†Œì—ì„œ <strong>ìˆœì„œë¥¼ ê³ ë ¤í•˜ì§€ ì•Šê³ </strong> rê°œë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. 'ëŒ€í‘œ 2ëª… ë½‘ê¸°'ì™€ ê°™ì´ ìˆœì„œê°€ ê²°ê³¼ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
                    <ul>
                        <li><b>ê¸°í˜¸:</b> <code>â‚™Cáµ£</code></li>
                        <li><b>ê³„ì‚° ê³µì‹:</b> <code>n! / (r! * (n-r)!) = â‚™Páµ£ / r!</code></li>
                        <li><b>ì¤‘ë³µì¡°í•©:</b> ì„œë¡œ ë‹¤ë¥¸ nê°œì—ì„œ <strong>ì¤‘ë³µì„ í—ˆìš©í•˜ì—¬</strong> rê°œë¥¼ íƒí•˜ëŠ” ì¡°í•©ì…ë‹ˆë‹¤. 'ê³¼ì¼ ê°€ê²Œì—ì„œ 5ê°œì˜ ê³¼ì¼ ì‚¬ê¸°'ì™€ ê°™ì´ ìˆœì„œ ì—†ì´ ì¤‘ë³µì´ ê°€ëŠ¥í•œ ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤. (<code>â‚™â‚Šáµ£â‚‹â‚Cáµ£</code>)</li>
                    </ul>
                    <div class="btn-container">
                        <button class="btn btn-primary" onclick="showView('perm-comb-example-difficulty')">ì˜ˆì œí’€ì´ ë³´ê¸°</button>
                        <button class="btn btn-primary" onclick="showView('perm-comb-quiz-difficulty')">ë¬¸ì œí’€ì´ ì‹œì‘</button>
                    </div>
                </div>
                <div id="perm-comb-example-difficulty" style="display:none;">
                    <h2>ìˆœì—´ê³¼ ì¡°í•© - ì˜ˆì œ ë‚œì´ë„ ì„ íƒ</h2>
                    <div class="btn-container">
                        <button class="btn btn-difficulty" onclick="startExamples('perm-comb', 'basic')">ê¸°ì´ˆ ì˜ˆì œ</button>
                        <button class="btn btn-difficulty" onclick="startExamples('perm-comb', 'intermediate')">ì‘ìš© ì˜ˆì œ</button>
                    </div>
                    <div class="btn-container"><button class="btn" onclick="showView('perm-comb-concept')">ê°œë…ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button></div>
                </div>
                <div id="perm-comb-example-view" class="dynamic-view-container" style="display:none;"></div>
                <div id="perm-comb-quiz-difficulty" style="display:none;">
                    <h2>ìˆœì—´ê³¼ ì¡°í•© - ë¬¸ì œ ë‚œì´ë„ ì„ íƒ</h2>
                    <div class="btn-container">
                        <button class="btn btn-difficulty" onclick="startQuiz('perm-comb', 'basic')">ê¸°ì´ˆ</button>
                        <button class="btn btn-difficulty" onclick="startQuiz('perm-comb', 'intermediate')">ì‘ìš©</button>
                        <button class="btn btn-difficulty" onclick="startQuiz('perm-comb', 'advanced')">ì‹¬í™”</button>
                    </div>
                     <div class="btn-container"><button class="btn" onclick="showView('perm-comb-concept')">ê°œë…ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button></div>
                </div>
                <div id="perm-comb-quiz-view" class="dynamic-view-container" style="display:none;"></div>
            </div>

            <div id="binomial" class="content-section">
                 <div id="binomial-concept">
                    <h2>ì´í•­ì •ë¦¬</h2>
                    <h3>1. ì´í•­ì •ë¦¬ë€?</h3>
                    <p>ì´í•­(í•­ì´ ë‘ ê°œ)ì˜ ê±°ë“­ì œê³± <code>(a+b)â¿</code>ì„ ì „ê°œí–ˆì„ ë•Œ ë‚˜íƒ€ë‚˜ëŠ” ì‹ì˜ ê·œì¹™ì„±ì…ë‹ˆë‹¤. ì´í•­ì •ë¦¬ë¥¼ ì´ìš©í•˜ë©´ ë³µì¡í•œ ë‹¤í•­ì‹ì˜ íŠ¹ì • í•­ì˜ ê³„ìˆ˜ë¥¼ ì‰½ê²Œ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <p><b>ê¸°ë³¸ ê³µì‹:</b> (a+b)â¿ = â‚™Câ‚€aâ¿ + â‚™Câ‚aâ¿â»Â¹bÂ¹ + ... + â‚™Cáµ£aâ¿â»Ê³bÊ³ + ... + â‚™Câ‚™bâ¿</p>
                    <p>ì—¬ê¸°ì„œ ê° í•­ì˜ ê³„ìˆ˜ <code>â‚™Cáµ£</code>ì„ <b>ì´í•­ê³„ìˆ˜</b>ë¼ê³  í•˜ë©°, <code>â‚™Cáµ£aâ¿â»Ê³bÊ³</code>ì„ ì „ê°œì‹ì˜ <b>ì¼ë°˜í•­</b>ì´ë¼ê³  í•©ë‹ˆë‹¤. ì¼ë°˜í•­ì€ íŠ¹ì • í•­ì„ ì°¾ëŠ” ë° ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.</p>
                    
                    <h3>2. íŒŒìŠ¤ì¹¼ì˜ ì‚¼ê°í˜•</h3>
                    <p>ì´í•­ê³„ìˆ˜(<code>â‚™Cáµ£</code>)ë¥¼ ì‚¼ê°í˜• ëª¨ì–‘ìœ¼ë¡œ ë°°ì—´í•œ ê²ƒì…ë‹ˆë‹¤. ê° í–‰ì€ <code>(a+b)â¿</code>ì˜ ê³„ìˆ˜ë“¤ê³¼ ì¼ì¹˜í•˜ë©°, ë‹¤ìŒê³¼ ê°™ì€ ì¤‘ìš”í•œ ì„±ì§ˆì„ ê°€ì§‘ë‹ˆë‹¤.</p>
                    <ul>
                        <li>ê° í–‰ì˜ ì–‘ ë ìˆ«ìëŠ” í•­ìƒ 1ì…ë‹ˆë‹¤. (<code>â‚™Câ‚€ = â‚™Câ‚™ = 1</code>)</li>
                        <li>ê° í–‰ì˜ ìˆ«ìëŠ” ë°”ë¡œ ìœ„ í–‰ì˜ ì´ì›ƒí•œ ë‘ ìˆ«ìì˜ í•©ê³¼ ê°™ìŠµë‹ˆë‹¤. (<code>â‚™â‚‹â‚Cáµ£â‚‹â‚ + â‚™â‚‹â‚Cáµ£ = â‚™Cáµ£</code>)</li>
                        <li>ní–‰ì˜ ëª¨ë“  ì´í•­ê³„ìˆ˜ì˜ í•©ì€ <code>2â¿</code> ì…ë‹ˆë‹¤. (<code>â‚™Câ‚€ + â‚™Câ‚ + ... + â‚™Câ‚™ = 2â¿</code>)</li>
                        <li><b>í•˜í‚¤ ìŠ¤í‹± íŒ¨í„´:</b> ì‚¼ê°í˜•ì˜ ëŒ€ê°ì„  ìœ„ ìˆ«ìë“¤ì˜ í•©ì€ ê·¸ ë‹¤ìŒ í–‰ì˜ ì•ˆìª½ ìˆ«ìì™€ ê°™ìŠµë‹ˆë‹¤.</li>
                    </ul>
                    <div class="btn-container">
                        <button class="btn btn-primary" onclick="showView('binomial-example-difficulty')">ì˜ˆì œí’€ì´ ë³´ê¸°</button>
                        <button class="btn btn-primary" onclick="showView('binomial-quiz-difficulty')">ë¬¸ì œí’€ì´ ì‹œì‘</button>
                    </div>
                </div>
                 <div id="binomial-example-difficulty" style="display:none;">
                    <h2>ì´í•­ì •ë¦¬ - ì˜ˆì œ ë‚œì´ë„ ì„ íƒ</h2>
                    <div class="btn-container">
                        <button class="btn btn-difficulty" onclick="startExamples('binomial', 'basic')">ê¸°ì´ˆ ì˜ˆì œ</button>
                        <button class="btn btn-difficulty" onclick="startExamples('binomial', 'intermediate')">ì‘ìš© ì˜ˆì œ</button>
                    </div>
                    <div class="btn-container"><button class="btn" onclick="showView('binomial-concept')">ê°œë…ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button></div>
                </div>
                <div id="binomial-example-view" class="dynamic-view-container" style="display:none;"></div>
                <div id="binomial-quiz-difficulty" style="display:none;">
                    <h2>ì´í•­ì •ë¦¬ - ë¬¸ì œ ë‚œì´ë„ ì„ íƒ</h2>
                    <div class="btn-container">
                        <button class="btn btn-difficulty" onclick="startQuiz('binomial', 'basic')">ê¸°ì´ˆ</button>
                        <button class="btn btn-difficulty" onclick="startQuiz('binomial', 'intermediate')">ì‘ìš©</button>
                        <button class="btn btn-difficulty" onclick="startQuiz('binomial', 'advanced')">ì‹¬í™”</button>
                    </div>
                    <div class="btn-container"><button class="btn" onclick="showView('binomial-concept')">ê°œë…ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button></div>
                </div>
                <div id="binomial-quiz-view" class="dynamic-view-container" style="display:none;"></div>
            </div>
        </div>
        <footer>
            <p>ë§Œë“ ì´ by ê¹€ê¹ê¹</p>
        </footer>
    </div>
</div>

<script>
    // --- ë°ì´í„°ë² ì´ìŠ¤ ---
    const exampleData = {
        'perm-comb': {
            'basic': [
                { q: "5ëª…ì˜ í•™ìƒ ì¤‘ 3ëª…ì„ ë½‘ì•„ ì¼ë ¬ë¡œ ì„¸ìš°ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", sol: "<b>ê°œë…:</b> ìˆœì—´ (Permutation)<br>ì„œë¡œ ë‹¤ë¥¸ 5ëª… ì¤‘ 3ëª…ì„ ìˆœì„œì— ë§ê²Œ ë‚˜ì—´í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ìˆœì—´ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.<br><b>í’€ì´:</b> â‚…Pâ‚ƒ = 5 Ã— 4 Ã— 3 = 60ê°€ì§€ì…ë‹ˆë‹¤." },
                { q: "ë¹¨ê°•, ë…¸ë‘, íŒŒë‘, ì´ˆë¡ 4ê°€ì§€ ìƒ‰ê¹” ì¤‘ 2ê°€ì§€ë¥¼ ìˆœì„œì— ìƒê´€ì—†ì´ ê³ ë¥´ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", sol: "<b>ê°œë…:</b> ì¡°í•© (Combination)<br>ìˆœì„œì— ìƒê´€ì—†ì´ 2ê°€ì§€ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒì´ë¯€ë¡œ ì¡°í•©ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.<br><b>í’€ì´:</b> â‚„Câ‚‚ = (4 Ã— 3) / (2 Ã— 1) = 6ê°€ì§€ì…ë‹ˆë‹¤." }
            ],
            'intermediate': [
                { q: "ë¶€ëª¨ë‹˜ì„ í¬í•¨í•œ 5ëª…ì˜ ê°€ì¡±ì´ ì›íƒì— ì•‰ì„ ë•Œ, ë¶€ëª¨ë‹˜ì´ ì„œë¡œ ì´ì›ƒí•˜ê²Œ ì•‰ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", sol: "<b>ê°œë…:</b> ì›ìˆœì—´ + ì´ì›ƒí•˜ëŠ” ê²½ìš°ì˜ ìˆ˜<br>1. ë¶€ëª¨ë‹˜ì„ í•˜ë‚˜ì˜ ë¬¶ìŒìœ¼ë¡œ ìƒê°í•˜ë©´ ì´ 4ê°œì˜ ë‹¨ìœ„ë¥¼ ì›í˜•ìœ¼ë¡œ ë°°ì—´í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.<br>2. ì›ìˆœì—´ ê³µì‹ (n-1)!ì„ ì ìš©í•˜ë©´ (4-1)! = 3! = 6ê°€ì§€ì…ë‹ˆë‹¤.<br>3. ë¬¶ìŒ ì•ˆì—ì„œ ë¶€ëª¨ë‹˜ì´ ì„œë¡œ ìë¦¬ë¥¼ ë°”ê¾¸ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ” 2! = 2ê°€ì§€ì…ë‹ˆë‹¤.<br><b>í’€ì´:</b> ê³±ì˜ ë²•ì¹™ì— ë”°ë¼ 6 Ã— 2 = 12ê°€ì§€ì…ë‹ˆë‹¤." },
                { q: "ë°©ì •ì‹ x + y + z = 7ì„ ë§Œì¡±ì‹œí‚¤ëŠ” ìŒì´ ì•„ë‹Œ ì •ìˆ˜í•´(xâ‰¥0, yâ‰¥0, zâ‰¥0)ì˜ ê°œìˆ˜ëŠ”?", sol: "<b>ê°œë…:</b> ì¤‘ë³µì¡°í•© (Combination with Repetition)<br>ì„œë¡œ ë‹¤ë¥¸ 3ê°œì˜ ë¬¸ì(x, y, z)ì—ì„œ ì¤‘ë³µì„ í—ˆìš©í•˜ì—¬ 7ê°œë¥¼ ë½‘ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.<br><b>í’€ì´:</b> â‚ƒHâ‚‡ = â‚ƒâ‚Šâ‚‡â‚‹â‚Câ‚‡ = â‚‰Câ‚‡ = â‚‰Câ‚‚ = (9 Ã— 8) / 2 = 36ê°€ì§€ì…ë‹ˆë‹¤." }
            ]
        },
        'binomial': {
            'basic': [
                { q: "(x + 2)â´ì˜ ì „ê°œì‹ì—ì„œ xÂ³ì˜ ê³„ìˆ˜ë¥¼ êµ¬í•˜ì‹œì˜¤.", sol: "<b>ê°œë…:</b> ì´í•­ì •ë¦¬ ì¼ë°˜í•­<br>ì¼ë°˜í•­ì€ â‚„Cáµ£ * xâ´â»Ê³ * 2Ê³ ì…ë‹ˆë‹¤.<br>xÂ³í•­ì´ ë˜ë ¤ë©´ xì˜ ì§€ìˆ˜ì¸ 4-rì´ 3ì´ì–´ì•¼ í•˜ë¯€ë¡œ, r=1 ì…ë‹ˆë‹¤.<br><b>í’€ì´:</b> r=1ì„ ì¼ë°˜í•­ì— ëŒ€ì…í•˜ë©´ â‚„Câ‚ * xÂ³ * 2Â¹ = 4 * xÂ³ * 2 = 8xÂ³. ë”°ë¼ì„œ ê³„ìˆ˜ëŠ” <b>8</b>ì…ë‹ˆë‹¤." },
                { q: "íŒŒìŠ¤ì¹¼ì˜ ì‚¼ê°í˜•ì˜ ì„±ì§ˆì„ ì´ìš©í•˜ì—¬ â‚…Câ‚‚ + â‚…Câ‚ƒ ì˜ ê°’ì„ êµ¬í•˜ì‹œì˜¤.", sol: "<b>ê°œë…:</b> íŒŒìŠ¤ì¹¼ì˜ ì‚¼ê°í˜• ì„±ì§ˆ (n-1Cr-1 + n-1Cr = nCr)<br>ì´ ì„±ì§ˆì— ë”°ë¼ n-1=5, r-1=2, r=3ìœ¼ë¡œ ë³´ë©´ n=6, r=3ì´ ë©ë‹ˆë‹¤.<br><b>í’€ì´:</b> â‚…Câ‚‚ + â‚…Câ‚ƒ = â‚†Câ‚ƒ = (6 Ã— 5 Ã— 4) / (3 Ã— 2 Ã— 1) = 20ì…ë‹ˆë‹¤." }
            ],
            'intermediate': [
                { q: "(2x - 1/x)â¶ ì˜ ì „ê°œì‹ì—ì„œ ìƒìˆ˜í•­ì„ êµ¬í•˜ì‹œì˜¤.", sol: "<b>ê°œë…:</b> ì´í•­ì •ë¦¬ ì¼ë°˜í•­ í™œìš©<br>ì¼ë°˜í•­ì€ â‚†Cáµ£ * (2x)â¶â»Ê³ * (-1/x)Ê³ = â‚†Cáµ£ * 2â¶â»Ê³ * (-1)Ê³ * xâ¶â»Â²Ê³ ì…ë‹ˆë‹¤.<br>ìƒìˆ˜í•­ì€ xì˜ ì§€ìˆ˜ê°€ 0ì´ ë˜ëŠ” í•­ì´ë¯€ë¡œ, 6-2r=0 ì´ì–´ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ r=3 ì…ë‹ˆë‹¤.<br><b>í’€ì´:</b> r=3ì„ ê³„ìˆ˜ ë¶€ë¶„ì— ëŒ€ì…í•˜ë©´ â‚†Câ‚ƒ * 2Â³ * (-1)Â³ = 20 * 8 * (-1) = -160ì…ë‹ˆë‹¤." },
                { q: "â‚â‚€Câ‚€ + â‚â‚€Câ‚ + â‚â‚€Câ‚‚ + ... + â‚â‚€Câ‚â‚€ ì˜ ê°’ì„ êµ¬í•˜ì‹œì˜¤.", sol: "<b>ê°œë…:</b> ì´í•­ê³„ìˆ˜ì˜ ì„±ì§ˆ<br>ì´í•­ê³„ìˆ˜ì˜ í•© ê³µì‹ â‚™Câ‚€ + â‚™Câ‚ + ... + â‚™Câ‚™ = 2â¿ì„ ì´ìš©í•©ë‹ˆë‹¤.<br><b>í’€ì´:</b> n=10ì´ë¯€ë¡œ, í•©ì€ 2Â¹â° = 1024ì…ë‹ˆë‹¤." }
            ]
        }
    };
    const quizData = {
        'perm-comb': {
            'basic': [
                { q: "ì„œë¡œ ë‹¤ë¥¸ 4ê¶Œì˜ ì±… ì¤‘ 2ê¶Œì„ ê³¨ë¼ ìˆœì„œëŒ€ë¡œ ê½‚ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "12", sol: "â‚„Pâ‚‚ = 4 Ã— 3 = 12" },
                { q: "5ëª…ì˜ í•™ìƒ ì¤‘ ëŒ€í‘œ 2ëª…ì„ ë½‘ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "10", sol: "â‚…Câ‚‚ = (5 Ã— 4) / (2 Ã— 1) = 10" },
                { q: "ë‘ ì£¼ì‚¬ìœ„ë¥¼ ë˜ì§ˆ ë•Œ, ëˆˆì˜ í•©ì´ 4ê°€ ë˜ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "3", sol: "(1,3), (2,2), (3,1)ì˜ 3ê°€ì§€" },
                { q: "ìˆ«ì 1, 2, 3ì„ ì‚¬ìš©í•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì„¸ ìë¦¬ ìì—°ìˆ˜ì˜ ê°œìˆ˜ëŠ”?", a: "6", sol: "â‚ƒPâ‚ƒ = 3! = 6" },
                { q: "A, B, C, D ë„¤ ì‚¬ëŒì´ ì¼ë ¬ë¡œ ì„¤ ë•Œ, Aê°€ ë§¨ ì•ì— ì„œëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "6", sol: "Aë¥¼ ê³ ì •í•˜ê³  ë‚˜ë¨¸ì§€ 3ëª…ì„ ë‚˜ì—´í•˜ë¯€ë¡œ 3! = 6" }
            ],
            'intermediate': [
                { q: "0, 1, 2, 3, 4ì˜ ìˆ«ìë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì„¸ ìë¦¬ ì§ìˆ˜ëŠ”? (ì¤‘ë³µ í—ˆìš©, 0ìœ¼ë¡œ ì‹œì‘ ë¶ˆê°€)", a: "50", sol: "ì¼ì˜ ìë¦¬ê°€ 0: ë°±ì˜ ìë¦¬ì— ì˜¬ ìˆ˜ ìˆëŠ” ìˆ˜ëŠ” 1,2,3,4(4ê°€ì§€), ì‹­ì˜ ìë¦¬ëŠ” 5ê°€ì§€. 4*5=20ê°€ì§€. ì¼ì˜ ìë¦¬ê°€ 2 ë˜ëŠ” 4: ë°±ì˜ ìë¦¬ëŠ” 0ì œì™¸(4ê°€ì§€->3ê°€ì§€), ì‹­ì˜ ìë¦¬ëŠ” 5ê°€ì§€. 3*5*2=30ê°€ì§€. 20+30=50" },
                { q: "ë‚¨í•™ìƒ 3ëª…ê³¼ ì—¬í•™ìƒ 3ëª…ì„ ì¼ë ¬ë¡œ ì„¸ìš¸ ë•Œ, ë‚¨ë…€ê°€ êµëŒ€ë¡œ ì„œëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "72", sol: "(ë‚¨ë…€ë‚¨ë…€ë‚¨ë…€: 3!Ã—3!=36) + (ì—¬ë‚¨ì—¬ë‚¨ì—¬ë‚¨: 3!Ã—3!=36) = 72" },
                { q: "computer'ì˜ 8ê°œ ë¬¸ìë¥¼ ì¼ë ¬ë¡œ ë‚˜ì—´í•  ë•Œ, cì™€ r ì‚¬ì´ì— 2ê°œì˜ ë¬¸ìê°€ ë“¤ì–´ê°€ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "7200", sol: "c,r ì œì™¸ 6ê°œ ë¬¸ì ì¤‘ 2ê°œ ì„ íƒ(â‚†Pâ‚‚=30). (c O O r) ë¬¶ìŒì„ í•˜ë‚˜ë¡œ ë³´ê³  5! ë°°ì—´. cì™€ r ìë¦¬ë°”ê¿ˆ(2!). 30 Ã— 5! Ã— 2 = 7200" },
                { q: "ë¹¨ê°„ ê³µ 3ê°œ, íŒŒë€ ê³µ 2ê°œë¥¼ ì¼ë ¬ë¡œ ë‚˜ì—´í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "10", sol: "ê°™ì€ ê²ƒì´ ìˆëŠ” ìˆœì—´: 5! / (3! Ã— 2!) = 10" },
                { q: "ì‚¬ê³¼, ë°°, ê° ì„¸ ì¢…ë¥˜ì˜ ê³¼ì¼ ì¤‘ì—ì„œ ì¤‘ë³µì„ í—ˆìš©í•˜ì—¬ 5ê°œë¥¼ ì‚¬ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "21", sol: "ì„œë¡œ ë‹¤ë¥¸ 3ê°œì—ì„œ ì¤‘ë³µì„ í—ˆìš©í•˜ì—¬ 5ê°œë¥¼ ë½‘ëŠ” ì¤‘ë³µì¡°í•©: â‚ƒHâ‚… = â‚‡Câ‚… = â‚‡Câ‚‚ = 21" }
            ],
            'advanced': [
                 { q: "A,B,C,D,E 5ëª…ì„ 3ê°œì˜ ë‹¤ë¥¸ ë°©ì— ë°°ì •í•  ë•Œ, ë¹ˆ ë°©ì´ ì—†ë„ë¡ ë°°ì •í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "150", sol: "ë¶„í• ê³¼ ë¶„ë°°: S(5,3) * 3! = 25 * 6 = 150. ë˜ëŠ” ì „ì²´(3âµ) - 1ê°œë°©ë§Œì‚¬ìš©(3) - 2ê°œë°©ë§Œì‚¬ìš©(3C2*(2^5-2)) = 243-3-90=150" },
                 { q: "ë°©ì •ì‹ x + y + z = 9ë¥¼ ë§Œì¡±ì‹œí‚¤ëŠ” ì–‘ì˜ ì •ìˆ˜í•´ì˜ ê°œìˆ˜ëŠ”?", a: "28", sol: "x', y', z'ì„ x-1, y-1, z-1ë¡œ ì¹˜í™˜. x'+y'+z'=6. â‚ƒHâ‚† = â‚ˆCâ‚† = 28" },
                 { q: "ê°€ë¡œ 4, ì„¸ë¡œ 3 ë„ë¡œë§ì—ì„œ Aì—ì„œ Bê¹Œì§€ ìµœë‹¨ê±°ë¦¬ë¡œ ê°€ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "35", sol: "ì´ 7ë²ˆ ì´ë™ ì¤‘ ê°€ë¡œ 4ë²ˆ ì„ íƒ: â‚‡Câ‚„ = 35" },
                 { q: "1,1,1,2,2,3,3ì˜ 7ê°œ ìˆ«ìë¥¼ ë‚˜ì—´í•˜ì—¬ ë§Œë“¤ ìˆ˜ ìˆëŠ” 7ìë¦¬ ìì—°ìˆ˜ì˜ ê°œìˆ˜ëŠ”?", a: "210", sol: "ê°™ì€ ê²ƒì´ ìˆëŠ” ìˆœì—´: 7! / (3! Ã— 2! Ã— 2!) = 210" },
                 { q: "ì›íƒì— ë‚¨ì 4ëª…ê³¼ ì—¬ì 4ëª…ì´ êµëŒ€ë¡œ ì•‰ëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ”?", a: "144", sol: "ë‚¨ì ë¨¼ì € ì›í˜• ë°°ì—´( (4-1)! = 6 ). ì—¬ì 4ëª…ì„ ì‚¬ì´ 4ìë¦¬ì— ë°°ì—´( 4! = 24 ). 6 Ã— 24 = 144" }
            ]
        },
        'binomial': {
             'basic': [
                { q: "(a+b)Â³ì˜ ì „ê°œì‹ì—ì„œ aÂ²bì˜ ê³„ìˆ˜ëŠ”?", a: "3", sol: "ì¼ë°˜í•­ â‚ƒCáµ£aÂ³â»Ê³bÊ³ì—ì„œ r=1ì¼ ë•Œ, â‚ƒCâ‚=3" },
                { q: "(x+2)â´ì˜ ì „ê°œì‹ì—ì„œ xÂ³ì˜ ê³„ìˆ˜ëŠ”?", a: "8", sol: "â‚„Câ‚xÂ³(2)Â¹ ì´ë¯€ë¡œ ê³„ìˆ˜ëŠ” 4Ã—2=8" },
                { q: "ì´í•­ê³„ìˆ˜ì˜ í•© â‚…Câ‚€ + â‚…Câ‚ + ... + â‚…Câ‚…ì˜ ê°’ì€?", a: "32", sol: "ì´í•­ê³„ìˆ˜ì˜ ì„±ì§ˆì— ì˜í•´ 2âµ = 32" },
                { q: "(2x+1)Â³ì˜ ì „ê°œì‹ì—ì„œ xì˜ ê³„ìˆ˜ëŠ”?", a: "6", sol: "â‚ƒCâ‚‚(2x)Â¹(1)Â² ì´ë¯€ë¡œ ê³„ìˆ˜ëŠ” 3Ã—2=6" },
                { q: "íŒŒìŠ¤ì¹¼ì˜ ì‚¼ê°í˜•ì—ì„œ â‚„Câ‚‚ + â‚„Câ‚ƒì˜ ê°’ê³¼ ê°™ì€ ê²ƒì€? (ê¸°í˜¸ë¡œ ë‹µí•˜ì‹œì˜¤)", a: "5C3", sol: "íŒŒìŠ¤ì¹¼ì˜ ì‚¼ê°í˜•ì˜ ì„±ì§ˆ n-1Cr-1 + n-1Cr = nCr" }
            ],
            'intermediate': [
                 { q: "(x + 1/x)â¶ì˜ ì „ê°œì‹ì—ì„œ ìƒìˆ˜í•­ì€?", a: "20", sol: "ì¼ë°˜í•­ â‚†Cáµ£xâ¶â»Ê³(xâ»Â¹)Ê³ = â‚†Cáµ£xâ¶â»Â²Ê³. 6-2r=0 ì´ë¯€ë¡œ r=3. â‚†Câ‚ƒ=20" },
                 { q: "(2x-y)âµì˜ ì „ê°œì‹ì—ì„œ xÂ³yÂ²ì˜ ê³„ìˆ˜ëŠ”?", a: "80", sol: "â‚…Câ‚‚(2x)Â³(-y)Â² = 10 Ã— 8xÂ³ Ã— yÂ² ì´ë¯€ë¡œ ê³„ìˆ˜ëŠ” 80" },
                 { q: "â‚â‚€Câ‚ + â‚â‚€Câ‚‚ + ... + â‚â‚€Câ‚â‚€ ì˜ ê°’ì€?", a: "1023", sol: "2Â¹â° - â‚â‚€Câ‚€ = 1024 - 1 = 1023" },
                 { q: "(1+x)â¿ì˜ ì „ê°œì‹ì„ ì´ìš©í•˜ì—¬ 11Â³ì˜ ê°’ì„ êµ¬í•˜ì‹œì˜¤.", a: "1331", sol: "(1+10)Â³ = â‚ƒCâ‚€10â° + â‚ƒCâ‚10Â¹ + â‚ƒCâ‚‚10Â² + â‚ƒCâ‚ƒ10Â³ = 1+30+300+1000 = 1331" },
                 { q: "(xÂ²-2/x)â·ì˜ ì „ê°œì‹ì—ì„œ xâµì˜ ê³„ìˆ˜ëŠ”?", a: "-280", sol: "â‚‡Cáµ£(xÂ²)â·â»Ê³(-2xâ»Â¹)Ê³. xì˜ ì§€ìˆ˜ 14-3r=5 -> 3r=9 -> r=3. â‚‡Câ‚ƒ * (-2)Â³ = 35 * (-8) = -280" }
            ],
            'advanced': [
                 { q: "(1+x) + (1+x)Â² + ... + (1+x)Â¹â°ì˜ ì „ê°œì‹ì—ì„œ xÂ²ì˜ ê³„ìˆ˜ëŠ”?", a: "165", sol: "ë“±ë¹„ìˆ˜ì—´ì˜ í•© ê³µì‹ ì´ìš©. ê° í•­ì—ì„œ xÂ²ì˜ ê³„ìˆ˜ëŠ” â‚‚Câ‚‚, â‚ƒCâ‚‚, ..., â‚â‚€Câ‚‚. í•˜í‚¤ìŠ¤í‹± íŒ¨í„´ì— ì˜í•´ í•©ì€ â‚â‚Câ‚ƒ = 165" },
                 { q: "(x+a)Â¹â°ì˜ ì „ê°œì‹ì—ì„œ xâ¸ì˜ ê³„ìˆ˜ê°€ 180ì¼ ë•Œ, ì–‘ìˆ˜ aì˜ ê°’ì€?", a: "2", sol: "â‚â‚€Câ‚‚xâ¸aÂ² = 45aÂ²xâ¸. 45aÂ²=180 ì´ë¯€ë¡œ aÂ²=4, a=2" },
                 { q: "â‚â‚€Câ‚€ - â‚â‚€Câ‚ + â‚â‚€Câ‚‚ - ... + â‚â‚€Câ‚â‚€ ì˜ ê°’ì€?", a: "0", sol: "(1-1)Â¹â°ì˜ ì „ê°œì‹ê³¼ ê°™ìœ¼ë¯€ë¡œ 0Â¹â° = 0" },
                 { q: "99âµì„ 100ìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ëŠ”?", a: "99", sol: "(100-1)âµ = ... + â‚…Câ‚„(100)Â¹(-1)â´ + â‚…Câ‚…(100)â°(-1)âµ. 100ì˜ ë°°ìˆ˜ë“¤ì„ ì œì™¸í•˜ë©´ ë§ˆì§€ë§‰ í•­ -1ë§Œ ë‚¨ìŒ. ë‚˜ë¨¸ì§€ëŠ” -1 â‰¡ 99 (mod 100)" },
                 { q: "í•˜í‚¤ìŠ¤í‹± íŒ¨í„´ì„ ì´ìš©í•˜ì—¬ â‚‚Câ‚‚ + â‚ƒCâ‚‚ + â‚„Câ‚‚ + â‚…Câ‚‚ì˜ ê°’ì„ êµ¬í•˜ì‹œì˜¤.", a: "35", sol: "í•˜í‚¤ìŠ¤í‹± íŒ¨í„´ì— ì˜í•´ í•©ì€ â‚†Câ‚ƒ = 20 + â‚…Câ‚ƒ = 10 + ... = â‚†Câ‚ƒ(ì˜¤ë¥˜). â‚‚Câ‚‚+â‚ƒCâ‚‚+â‚„Câ‚‚+â‚…Câ‚‚=â‚†Câ‚ƒ=20. (ìˆ˜ì •) â‚ƒCâ‚ƒ+â‚ƒCâ‚‚+â‚„Câ‚‚+â‚…Câ‚‚=â‚„Câ‚ƒ+â‚„Câ‚‚+â‚…Câ‚‚=â‚…Câ‚ƒ+â‚…Câ‚‚=â‚†Câ‚ƒ=20" }
            ]
        }
    };
    
    // --- ì „ì—­ ë³€ìˆ˜ ---
    let currentTopic = 'perm-comb';
    let userAnswers = [];
    let currentQuestionIndex = 0;

    // --- ê³µí†µ í•¨ìˆ˜ ---
    function showContent(topic) {
        currentTopic = topic;
        document.querySelectorAll('.content-section').forEach(section => section.style.display = 'none');
        document.getElementById(topic).style.display = 'block';
        document.querySelectorAll('.sidebar li').forEach(li => li.classList.remove('active'));
        document.querySelector(`.sidebar li[onclick="showContent('${topic}')"]`).classList.add('active');
        showView(topic + '-concept');
    }

    function showView(viewId) {
        document.querySelectorAll(`#${currentTopic} > div`).forEach(div => div.style.display = 'none');
        document.getElementById(viewId).style.display = 'block';
    }

    // --- ì˜ˆì œ ê´€ë ¨ í•¨ìˆ˜ ---
    function startExamples(topic, difficulty) {
        displayExample(topic, difficulty, 0);
        showView(`${topic}-example-view`);
    }

    function displayExample(topic, difficulty, index) {
        const view = document.getElementById(`${topic}-example-view`);
        const examples = exampleData[topic][difficulty];
        const ex = examples[index];

        let html = `
            <h3>${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)} ì˜ˆì œ (${index + 1}/${examples.length})</h3>
            <div class="problem">
                <p style="font-size: 1.2em;"><b>ë¬¸ì œ:</b> ${ex.q}</p>
                <hr>
                <p>${ex.sol}</p>
            </div>
            <div class="problem-navigation">
        `;
        
        html += (index > 0) ? `<button class="btn btn-primary" onclick="displayExample('${topic}', '${difficulty}', ${index - 1})">ì´ì „ ì˜ˆì œ</button>` : `<div></div>`;
        html += (index < examples.length - 1) ? `<button class="btn btn-primary" onclick="displayExample('${topic}', '${difficulty}', ${index + 1})">ë‹¤ìŒ ì˜ˆì œ</button>` : `<div></div>`;
        
        html += `</div>
            <div class="btn-container">
                 <button class="btn" onclick="showView('${topic}-example-difficulty')">ë‚œì´ë„ ì„ íƒìœ¼ë¡œ</button>
            </div>`;
        
        view.innerHTML = html;
    }

    // --- í€´ì¦ˆ ê´€ë ¨ í•¨ìˆ˜ ---
    function startQuiz(topic, difficulty) {
        userAnswers = [];
        currentQuestionIndex = 0;
        displayQuestion(topic, difficulty, 0);
        showView(`${topic}-quiz-view`);
    }

    function displayQuestion(topic, difficulty, index) {
        const quizView = document.getElementById(`${topic}-quiz-view`);
        const problems = quizData[topic][difficulty];
        const p = problems[index];

        let quizHtml = `
            <h3>${difficulty.charAt(0).toUpperCase() + difficulty.slice(1)} ë¬¸ì œ (${index + 1}/${problems.length})</h3>
            <div class="problem">
                <p style="font-size: 1.2em;"><b>ë¬¸ì œ ${index + 1}:</b> ${p.q}</p>
                <input type="text" id="quiz-answer" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" style="width: 80%; padding: 10px; font-size: 1em;">
            </div>
            <div class="problem-navigation">
        `;
        
        quizHtml += (index > 0) ? `<button class="btn btn-primary" onclick="navigateQuestion('${topic}', '${difficulty}', ${index - 1})">ì´ì „</button>` : `<div></div>`;
        quizHtml += (index < problems.length - 1) ? `<button class="btn btn-primary" onclick="navigateQuestion('${topic}', '${difficulty}', ${index + 1})">ë‹¤ìŒ</button>` : `<button class="btn btn-submit" onclick="submitQuiz('${topic}', '${difficulty}')">ê²°ê³¼ ë³´ê¸°</button>`;
        
        quizHtml += `</div>
            <div class="btn-container">
                 <button class="btn" onclick="showView('${topic}-quiz-difficulty')">ë‚œì´ë„ ì„ íƒìœ¼ë¡œ</button>
            </div>`;
        
        quizView.innerHTML = quizHtml;

        if (userAnswers[index]) {
            document.getElementById('quiz-answer').value = userAnswers[index];
        }
        document.getElementById('quiz-answer').focus();
    }

    function navigateQuestion(topic, difficulty, nextIndex) {
        const currentAnswer = document.getElementById('quiz-answer').value.trim();
        userAnswers[currentQuestionIndex] = currentAnswer;
        currentQuestionIndex = nextIndex;
        displayQuestion(topic, difficulty, nextIndex);
    }

    function submitQuiz(topic, difficulty) {
        const lastAnswer = document.getElementById('quiz-answer').value.trim();
        userAnswers[currentQuestionIndex] = lastAnswer;

        const problems = quizData[topic][difficulty];
        let score = 0;
        let resultHtml = '<h3>ìƒì„¸ í’€ì´</h3><div class="result-details">';

        problems.forEach((p, index) => {
            const userAnswer = userAnswers[index] || "";
            if (userAnswer.toLowerCase() === p.a.toLowerCase()) {
                score++;
                resultHtml += `<p><b class="correct">[ë¬¸ì œ ${index + 1} - ì •ë‹µ]</b><br>ì •ë‹µ: ${p.a} (ì œì¶œ: ${userAnswer})<br><i>í’€ì´: ${p.sol}</i></p>`;
            } else {
                resultHtml += `<p><b class="incorrect">[ë¬¸ì œ ${index + 1} - ì˜¤ë‹µ]</b><br>ì •ë‹µ: ${p.a} (ì œì¶œ: ${userAnswer || 'ë¯¸ì…ë ¥'})<br><i>í’€ì´: ${p.sol}</i></p>`;
            }
        });
        resultHtml += '</div>';

        const totalQuestions = problems.length;
        const finalScore = (score / totalQuestions) * 100;
        
        const quizView = document.getElementById(`${topic}-quiz-view`);
        quizView.innerHTML = `
            <div class="result-container">
                <h2>ì±„ì  ê²°ê³¼ ğŸ“Š</h2>
                <h3>ì´ ${totalQuestions}ë¬¸ì œ ì¤‘ ${score}ê°œë¥¼ ë§í˜”ìŠµë‹ˆë‹¤! (ì ìˆ˜: ${finalScore.toFixed(0)}ì )</h3>
            </div>
            ${resultHtml}
            <div class="btn-container">
                <button class="btn btn-primary" onclick="startQuiz('${topic}', '${difficulty}')">ë‹¤ì‹œ í’€ê¸°</button>
                <button class="btn" onclick="showView('${topic}-quiz-difficulty')">ë‹¤ë¥¸ ë‚œì´ë„ ì„ íƒ</button>
            </div>
        `;
    }

    // --- ì´ˆê¸°í™” ---
    document.addEventListener('DOMContentLoaded', () => {
        showContent('perm-comb');
    });
</script>

</body>
</html>
